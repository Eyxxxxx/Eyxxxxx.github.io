<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>笔记-补码的来龙去脉</title>
    <url>/posts/about%20two&#39;s%20complement/</url>
    <content><![CDATA[<p>缘起：<br>
看王爽的《汇编语言》（第四版）9.2节关于jmp指令的介绍时，第180页涉及了<strong>以补码表示数进行运算</strong>，又一次想起自己似乎从来没理解过补码这个东西。本文试图从数学中同余的角度来理解补码的来龙去脉。</p>
<a id="more"></a>
<h2 id="原始问题"><a class="markdownIt-Anchor" href="#原始问题"></a> 原始问题</h2>
<p>已知：</p>
<ul>
<li>标号处的地址是一个偏移地址，相应二进制串解释为 无符号数</li>
<li>jmp指令后的第一个字节的地址，相应二进制串解释为 无符号数</li>
<li>jmp指令中的位移（8位或16位），相应二进制串解释为 有符号数</li>
</ul>
<p><strong>注：</strong><br>
给定一个二进制串，<strong>以下无符号数指二进制字符串最高位取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">+2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>翻译得到的十进制数；以下有符号数指二进制字符串最高位取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">-2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>翻译得到的十进制数</strong></p>
<p><strong>问题：</strong>（考虑加法和减法）</p>
<ul>
<li>两个操作数为无符号数，是否可以得到一个有符号数作为结果（计算的<strong>正当性</strong>）？若可以，结果是什么？如何说明其<strong>正确性</strong>？</li>
<li>操作数一个为无符号数，另一个为有符号数，两者可否作运算（计算的<strong>正当性</strong>）？若可以，结果是什么？如何说明其<strong>正确性</strong>？</li>
</ul>
<p>注：<br>
事实上，主要考虑最高位为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的二进制串，此时有解释为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">+2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">-2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>的二义性。最高位为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>的二进制串是平凡的。</p>
<h2 id="预备知识"><a class="markdownIt-Anchor" href="#预备知识"></a> 预备知识</h2>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>位二进制数，可表示<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>个不同的数
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,\cdots, 2^{n}-1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span> 为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>的最小正缩系</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mo>−</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{-2^{n-1},\cdots,0,\cdots, 2^{n-1}-1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span> 为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>的最简剩余系</li>
</ul>
</li>
<li>下表中第二行、第三行左侧到右侧应当是一一映射。【同时具备这两种解释方式的【二进制与十进制之间的相互转换方式】】称为“补码”。<strong>所以补码应当是一种两个进制之间的转换方式或者说映射(当然这里的映射一词使用时并不是很严格符合数学上映射的定义)。</strong></li>
</ul>
<table>
<thead>
<tr>
<th>二进制</th>
<th>十进制</th>
</tr>
</thead>
<tbody>
<tr>
<td>unsigned</td>
<td>最小正缩系</td>
</tr>
<tr>
<td>signed</td>
<td>最简缩系</td>
</tr>
</tbody>
</table>
<ul>
<li>在同余和补码的语义下，有符号数和无符号数是模<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>相等的。
<ul>
<li>即，无符号数在同余意义下等于有符号数，即无符号数和有符号数可以相互转化。</li>
<li>注：考虑同余是合理的，因为计算机中能存储的数的大小是有限的，这恰好与剩余系的特点对应。（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>位二进制串只能表达一个取定的剩余系——通常为最小正缩系或最简缩系，<strong>超过一个缩系中的部分会溢出，这就相当于数学中的取模运算</strong>）</li>
</ul>
</li>
<li>计算机中数皆以补码形式存放，并在补码的基础上进行加减法计算</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>∪</mo><msup><mi mathvariant="double-struck">Z</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">{0}\cup \mathbb{Z}^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="mord">0</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> 的 原码、反码、补码都一致</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="double-struck">Z</mi><mo>−</mo></msup></mrow><annotation encoding="application/x-tex">\mathbb{Z}^-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span></span></span></span>的补码 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo></mrow><annotation encoding="application/x-tex">=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span> 其绝对值原码取反 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span></li>
</ul>
<h2 id="正当性和正确性-分析"><a class="markdownIt-Anchor" href="#正当性和正确性-分析"></a> 正当性和正确性 分析</h2>
<p>两个正数之间的加法是平凡的，有符号数和无符号数皆如此。此处提及有无符号是因为实际中需要考虑对应情况中 加法的定义域及相应的值域，以期避免溢出。</p>
<p><strong>对于减法，事实上我们不需要关心操作数是否有符号。</strong><br>
因为无符号数在同余意义下等于有符号数。所以所有运算最终都可化归至有符号数减去有符号数。</p>
<p><strong>对于减法的计算结果，</strong><br>
直觉上，我们认为 无符号数减去无符号数 结果应当是一个有符号数。更准确的说，这里得到的二进制串结果应当解释为一个有符号数。<br>
因为一个二进制数总可以解释为一个无符号数，即二进制到十进制转换由补码的定义可知二义性永远存在，所以重要的是我们根据情况<strong>选择</strong>对一个二进制串的正确解释方式即可。</p>
<h2 id="减法的核心难点借位"><a class="markdownIt-Anchor" href="#减法的核心难点借位"></a> 减法的核心难点——借位</h2>
<p><strong>核心思想</strong>：回避借位（这与被减数是否大于减数无关，例如：300-123也有借位）<br>
<strong>工具</strong>：同余、补数<br>
<strong>注</strong>：对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>的补数，即将x的最简缩系中的负数利用同余化到最小正缩系中。（详见《编码：隐匿在计算机软硬件背后的语言》P157页「<em>你可能听说过:“减一个数就等于加一个负数。”你可能会回答:“实际上还是减去了这个数。”然而，利用10的补数，我们将不会再用到减法。所有的步骤都用加法来进行。</em>
」）<br>
<strong>例子</strong>：<br>
以十进制为例：<br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>224</mn><mo>−</mo><mn>138</mn><mspace linebreak="newline"></mspace><mo>=</mo><mo stretchy="false">[</mo><mn>224</mn><mo>+</mo><mo stretchy="false">(</mo><mn>999</mn><mo>−</mo><mn>138</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mn>1000</mn><mspace linebreak="newline"></mspace><mo>=</mo><mo stretchy="false">[</mo><mn>224</mn><mo>+</mo><mn>861</mn><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mn>1000</mn><mspace linebreak="newline"></mspace><mo>=</mo><mn>1086</mn><mo>−</mo><mn>1000</mn><mspace linebreak="newline"></mspace><mo>=</mo><mn>86</mn></mrow><annotation encoding="application/x-tex">224-138\\
=[224+(999-138)+1]-1000\\
=[224+861+1]-1000\\
=1086-1000\\
=86</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">9</span><span class="mord">9</span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mord">6</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">8</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">6</span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>999</mn><mo>−</mo><mn>138</mn></mrow><annotation encoding="application/x-tex">999-138</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">9</span><span class="mord">9</span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span></span></span></span>先求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>138</mn></mrow><annotation encoding="application/x-tex">138</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span></span></span></span>对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span>的补数</li>
<li>通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> 将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>138</mn></mrow><annotation encoding="application/x-tex">138</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span></span></span></span>对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span>的补数转化为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>138</mn></mrow><annotation encoding="application/x-tex">138</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span></span></span></span>对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>的补数</li>
<li>事实上最后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">-1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>的操作是多余的，因为这个取模的操作在计算机中以溢出的形式呈现，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1000</mn></mrow><annotation encoding="application/x-tex">1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>直接溢出，见不到它也就不需要再考虑它了</li>
</ul>
<p>同理，对二进制而言，</p>
<ul>
<li>先求一个串对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的补数，即<strong>反码</strong></li>
<li>再通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>转化为对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的补数，即<strong>补码</strong></li>
</ul>
<p>事实上，</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>862</mn><mo>≡</mo><mo>−</mo><mn>138</mn><mo stretchy="false">(</mo><mspace></mspace><mspace width="0.6666666666666666em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mn>1000</mn><mo stretchy="false">)</mo></mspace></mrow><annotation encoding="application/x-tex">862\equiv -138 (\mod 1000)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">6</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span><span class="mopen">(</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6666666666666666em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mclose">)</span></span></span></span>
<ul>
<li><strong>求补数（二进制中称为补码）就是求同余</strong>，但是直接求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>138</mn></mrow><annotation encoding="application/x-tex">-138</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">3</span><span class="mord">8</span></span></span></span>关于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>的补数依旧涉及借位，因此分为两步，先<strong>求关于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span>的补数（没有借位）</strong>，再加一转化为对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>的补数</li>
<li>模数选取与进制选取有关，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1000</mn></mrow><annotation encoding="application/x-tex">1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>正好配十进制。话说十进制和二进制在表达上恰好很简洁，三进制或者二百三十三进制也可以有完全类似的行为，但看起来不是很直观。</li>
</ul>
</li>
</ul>
<h2 id="示例"><a class="markdownIt-Anchor" href="#示例"></a> 示例</h2>
<h3 id="示例1"><a class="markdownIt-Anchor" href="#示例1"></a> 示例1</h3>
<p>考虑<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>位二进制数，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">n=8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>，可表示<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>=</mo><mn>256</mn></mrow><annotation encoding="application/x-tex">2^8=256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span></span></span></span>个数<br>
无符号数<br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0000</mn><mo>−</mo><mn>0000</mn><mo>∼</mo><mn>1111</mn><mo>−</mo><mn>1111</mn><mo>→</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>255</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">0000-0000 \sim 1111-1111 \rightarrow [0,255]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">5</span><span class="mclose">]</span></span></span></span></p>
<p>有符号数<br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1000</mn><mo>−</mo><mn>0000</mn><mo>∼</mo><mn>1111</mn><mo>−</mo><mn>1111</mn><mo>→</mo><mo stretchy="false">[</mo><mo>−</mo><mn>128</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">1000-0000 \sim 1111-1111 \rightarrow [-128,-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mclose">]</span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0000</mn><mo>−</mo><mn>0000</mn><mo>∼</mo><mn>0111</mn><mo>−</mo><mn>1111</mn><mo>→</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>127</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">0000-0000 \sim 0111-1111 \rightarrow [0,127]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">7</span><span class="mclose">]</span></span></span></span><br>
对于有符号数同样可以想象一个数轴，自左<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1000</mn><mo>−</mo><mn>0000</mn></mrow><annotation encoding="application/x-tex">1000-0000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>向右以步长为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>递增至<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0111</mn><mo>−</mo><mn>1111</mn></mrow><annotation encoding="application/x-tex">0111-1111</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span></span></span></span></p>
<h3 id="示例2"><a class="markdownIt-Anchor" href="#示例2"></a> 示例2</h3>
<p>以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>位二进制串为例，考察 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>224</mn><mo>−</mo><mn>160</mn></mrow><annotation encoding="application/x-tex">224-160</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>160</mn><mo>−</mo><mn>224</mn></mrow><annotation encoding="application/x-tex">160-224</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>224</mn><mo>−</mo><mn>160</mn><mo>≡</mo><mo>−</mo><mo stretchy="false">(</mo><mn>256</mn><mo>−</mo><mn>224</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>256</mn><mo>−</mo><mn>160</mn><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mn>32</mn><mo>+</mo><mn>96</mn><mo>=</mo><mn>64</mn><mspace></mspace><mspace width="0.6666666666666666em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><msup><mn>2</mn><mn>8</mn></msup></mspace></mrow><annotation encoding="application/x-tex">224-160\equiv -(256-224)+(256-160) = -32+96 = 64 \mod 2^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">3</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6666666666666666em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>160</mn><mo>−</mo><mn>224</mn><mo>≡</mo><mo>−</mo><mo stretchy="false">(</mo><mn>256</mn><mo>−</mo><mn>160</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>256</mn><mo>−</mo><mn>224</mn><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mn>96</mn><mo>+</mo><mn>32</mn><mo>=</mo><mo>−</mo><mn>64</mn><mspace></mspace><mspace width="0.6666666666666666em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><msup><mn>2</mn><mn>8</mn></msup></mspace></mrow><annotation encoding="application/x-tex">160-224\equiv -(256-160)+(256-224) = -96+32 = -64\mod 2^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">6</span><span class="mord">4</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6666666666666666em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>起初两个无符号数作减法</li>
<li>（中间两步）通过求对 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 的补数转化为有符号数(示例二中两个式子为了简洁和直观写的都是十进制数，实际上在计算机中，每个数皆为补码形式存放的二进制串，所以最后的模数也是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">2^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span> )</li>
<li>最终得到两个有符号数作为结果</li>
<li>加上256或减去256不影响计算，因为这在计算机中是一个溢出了的数</li>
</ul>
]]></content>
      <categories>
        <category>自己玩儿</category>
      </categories>
      <tags>
        <tag>Computer organization</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编语言（第四版）-王爽 (题解)</title>
    <url>/posts/masm-wangshuang-exercise/</url>
    <content><![CDATA[<p>本书中部分习题\代码题记录</p>
<a id="more"></a>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<p><a href="https://www.cnblogs.com/Mayfly-nymph/p/12046088.html">《汇编语言》（王爽）课后答案 - Hk_Mayfly - 博客园</a></p>
<h2 id="注"><a class="markdownIt-Anchor" href="#注"></a> 注</h2>
<p>实验代码如果用notepad++等记事本写的，<strong>应当将文件的编码格式保存为utf-8，其它编码格式保存的文件会在编译的时候报莫名其妙的错</strong></p>
<h2 id="ch6"><a class="markdownIt-Anchor" href="#ch6"></a> CH6</h2>
<h3 id="实验5"><a class="markdownIt-Anchor" href="#实验5"></a> 实验5</h3>
<p>(2).4 该段实际占有的空间为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⌈</mo><mfrac><mi>N</mi><mn>16</mn></mfrac><mo stretchy="false">⌉</mo><mo>×</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">\lceil \frac{N}{16}\rceil\times 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mopen">⌈</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌉</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span></span></span></span>，
即一个段会自动对齐成16字节的倍数</p>
<p>(5)<strong>不能简单的把段寄存器ss当作一个存段地址的寄存器来用——见本书(第四版)第74页2.(2)。</strong> 定义一个栈段后，栈空间内的内容会被进行一些默认修改！所以如果简单把一个数据段通过ss寄存器定义为一个栈段会导致数据段中的数据丢失！（并且这种做法也显然不符合代码规范。）<strong>（第(6)题同理）</strong>
因为这里数据都是静态的、固定的，所以考虑用偏移来解题比较简单。
即标号b的地址为<code>a+10H</code>，标号c的地址为<code>a+20H</code></p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">a <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">db</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span></span><br><span class="line">a ends</span><br><span class="line"></span><br><span class="line">b <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">db</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span></span><br><span class="line">b ends</span><br><span class="line"></span><br><span class="line">c <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">db</span> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span></span><br><span class="line">c ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">	start:</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">ax</span>,a</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">ds</span>,<span class="built_in">ax</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">bx</span>,<span class="number">0</span>	<span class="comment">;offset</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="number">8</span>	<span class="comment">;counter</span></span><br><span class="line">		</span><br><span class="line"><span class="symbol">	s:</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">dx</span>,<span class="number">0</span>    <span class="comment">;store a+b</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">dx</span>,[<span class="built_in">bx</span>]</span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">dx</span>,[<span class="built_in">bx</span>+<span class="number">10h</span>]</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">mov</span> [<span class="built_in">bx</span>+<span class="number">20h</span>],<span class="built_in">dx</span></span><br><span class="line">		<span class="keyword">inc</span> <span class="built_in">bx</span></span><br><span class="line">		<span class="keyword">loop</span> s</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">4c00h</span></span><br><span class="line">	<span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>(6) 数据段不可以定义为一个栈段，最后存储数据的地方可以被定义为一个栈段。利用栈从高地址向低地址存储的特性，完成题目逆序存储的要求。<br>
注意，</p>
<ol>
<li>定义一个栈段后对栈空间的数据修改发生在定义时。</li>
<li>此处整个栈空间最终都将重新写入，所以前述对栈空间的修改将被最终计算结果再次覆盖。</li>
</ol>
<p>（不过感觉这么做好像也不是很符合代码规范）</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">a <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0ah</span>,<span class="number">0bh</span>,<span class="number">0ch</span>,<span class="number">0dh</span>,<span class="number">0eh</span>,<span class="number">0fh</span>,<span class="number">0ffh</span></span><br><span class="line">a ends</span><br><span class="line"></span><br><span class="line">b <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span></span><br><span class="line">b ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">start:</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,b</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ss</span>,<span class="built_in">ax</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">sp</span>,<span class="number">16</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,a</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ds</span>,<span class="built_in">ax</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">bx</span>,<span class="number">0</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="number">8</span></span><br><span class="line">	</span><br><span class="line"><span class="symbol">    s:</span></span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="built_in">bx</span>]</span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="number">2</span></span><br><span class="line">		<span class="keyword">loop</span> s</span><br><span class="line"></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">4c00h</span></span><br><span class="line">	<span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="ch7"><a class="markdownIt-Anchor" href="#ch7"></a> CH7</h2>
<h3 id="实验6"><a class="markdownIt-Anchor" href="#实验6"></a> 实验6</h3>
<p>(2)注意细节，</p>
<ul>
<li>比如起始地址下标从0开始数；</li>
<li>数据段中的单词如果不手动用空格对齐至16字节，是不会有任何形式的自动对齐的，<strong>所以要手动打上空格，便于后续的寻址操作。</strong></li>
</ul>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ss</span>:stack, <span class="built_in">ds</span>:data</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span></span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;1. display      &#x27;</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;2. brows        &#x27;</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;3. replace      &#x27;</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;4. modify       &#x27;</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,data	<span class="comment">;initialize reg ds</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ds</span>,<span class="built_in">ax</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,stack	<span class="comment">;initialize a stack</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ss</span>,<span class="built_in">ax</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">sp</span>,<span class="number">16</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">bx</span>,<span class="number">0</span>	<span class="comment">; row counter</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="number">4</span>	<span class="comment">; counter for outer loop</span></span><br><span class="line">	</span><br><span class="line"><span class="symbol">	s:</span> 	</span><br><span class="line">        <span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="number">4</span>	<span class="comment">; counter for inner loop</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">di</span>,<span class="number">0</span>	<span class="comment">; column counter</span></span><br><span class="line">		</span><br><span class="line"><span class="symbol">		s0:</span>	</span><br><span class="line">			<span class="keyword">mov</span> <span class="built_in">al</span>,[<span class="built_in">bx</span>+<span class="built_in">di</span>+<span class="number">3</span>]	<span class="comment">;lowercase2uppercase</span></span><br><span class="line">			<span class="keyword">and</span> <span class="built_in">al</span>,<span class="number">11011111b</span></span><br><span class="line">			<span class="keyword">mov</span> [<span class="built_in">bx</span>+<span class="built_in">di</span>+<span class="number">3</span>],<span class="built_in">al</span></span><br><span class="line">			</span><br><span class="line">			<span class="keyword">inc</span> <span class="built_in">di</span></span><br><span class="line">			<span class="keyword">loop</span> s0</span><br><span class="line">			</span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="number">16</span></span><br><span class="line">		<span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line">		<span class="keyword">loop</span> s</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">4c00h</span></span><br><span class="line">	<span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>运行结果如下</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/posts/masm-wangshuang-exercise/实验6.png">
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">实验6运行结果</div>
</center>
<h2 id="ch8"><a class="markdownIt-Anchor" href="#ch8"></a> CH8</h2>
<h3 id="实验7"><a class="markdownIt-Anchor" href="#实验7"></a> 实验7</h3>
<p>说明：数据段中有三类数据：年份（字节型），收入（双字型），雇员数（字型）。</p>
<ul>
<li>“年份”每一项为字节型字符串，即每一个数据项占<code>4*1B=4B</code></li>
<li>“收入”每一项为双字型，即每一个数据项占<code>1*4B=4B</code></li>
<li>“雇员数”每一项为字型，即每一个数据项占<code>1*2B=2B</code></li>
</ul>
<p>用bx寄存器存储每一个数据项相对于该类数据起始地址的偏移地址，又因为<code>mul</code>指令和<code>div</code>指令用起来都比较麻烦，所以bx的步长取最小的数据项（雇员类）即在最后每次加2字节，然后对于“年份”和“收入”这俩每项数据占4个字节的，通过计算<code>add bx,bx</code>实现<code>bx*2</code>得到这两类数据相对起点的偏移。</p>
<p><strong>这里偏移地址、相对地址、基址的计算是比较重要的，如果哪一个部分算错，导致写入（搬运数据）时覆盖了代码段则会死机。</strong></p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;1975&#x27;</span>,<span class="string">&#x27;1976&#x27;</span>,<span class="string">&#x27;1977&#x27;</span>,<span class="string">&#x27;1978&#x27;</span>,<span class="string">&#x27;1979&#x27;</span>,<span class="string">&#x27;1980&#x27;</span>,<span class="string">&#x27;1981&#x27;</span>,<span class="string">&#x27;1982&#x27;</span>,<span class="string">&#x27;1983&#x27;</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;1984&#x27;</span>,<span class="string">&#x27;1985&#x27;</span>,<span class="string">&#x27;1986&#x27;</span>,<span class="string">&#x27;1987&#x27;</span>,<span class="string">&#x27;1988&#x27;</span>,<span class="string">&#x27;1989&#x27;</span>,<span class="string">&#x27;1990&#x27;</span>,<span class="string">&#x27;1991&#x27;</span>,<span class="string">&#x27;1992&#x27;</span></span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;1993&#x27;</span>,<span class="string">&#x27;1994&#x27;</span>,<span class="string">&#x27;1995&#x27;</span></span><br><span class="line">		<span class="comment">;以上是表示21年的21个字符串</span></span><br><span class="line">	<span class="built_in">dd</span> <span class="number">16</span>,<span class="number">22</span>,<span class="number">382</span>,<span class="number">1356</span>,<span class="number">2390</span>,<span class="number">8000</span>,<span class="number">16000</span>,<span class="number">24486</span>,<span class="number">50065</span>,<span class="number">97479</span>,<span class="number">140417</span>,<span class="number">197514</span></span><br><span class="line">	<span class="built_in">dd</span> <span class="number">345980</span>,<span class="number">590827</span>,<span class="number">803530</span>,<span class="number">1183000</span>,<span class="number">1843000</span>,<span class="number">2759000</span>,<span class="number">3753000</span>,<span class="number">4649000</span>,<span class="number">5937000</span></span><br><span class="line">		<span class="comment">;以上是表示21年公司总收入的21个dword型数据</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">3</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">28</span>,<span class="number">38</span>,<span class="number">130</span>,<span class="number">220</span>,<span class="number">476</span>,<span class="number">778</span>,<span class="number">1001</span>,<span class="number">1442</span>,<span class="number">2258</span>,<span class="number">2793</span>,<span class="number">4037</span>,<span class="number">5635</span>,<span class="number">8226</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">11542</span>,<span class="number">14430</span>,<span class="number">15257</span>,<span class="number">17800</span></span><br><span class="line">		<span class="comment">;以上是表示21年公司雇员人数的21个word型数据</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">table <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">db</span> <span class="number">21</span> dup (<span class="string">&#x27;year summ ne ?? &#x27;</span>)</span><br><span class="line">table ends</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span>	<span class="comment">;reg会不够用，所以需要定义一个栈暂存数据</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">8</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,data</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ds</span>,<span class="built_in">ax</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,table	<span class="comment">;用一个段寄存器存table的地址</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">es</span>,<span class="built_in">ax</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,stack	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ss</span>,<span class="built_in">ax</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">bx</span>,<span class="number">0</span>		<span class="comment">;源数据地址相对基址的偏移地址</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">di</span>,<span class="number">0</span>		<span class="comment">;目的地址的偏移</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="number">21</span>		<span class="comment">;循环计数器</span></span><br><span class="line">	</span><br><span class="line"><span class="symbol">	s:</span> </span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">cx</span>		<span class="comment">;将循环计数器的值入栈后，可将cx继续当作临时reg使用</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;搬运年份</span></span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">bx</span>		</span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="built_in">bx</span>   <span class="comment">;每项数据占用4字节</span></span><br><span class="line">                    <span class="comment">;(ds*16+0h) 是该类数据的起始基址</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">ax</span>,[<span class="built_in">bx</span>]</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>],<span class="built_in">ax</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">ax</span>,[<span class="built_in">bx</span>+<span class="number">2</span>]</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>+<span class="number">2</span>],<span class="built_in">ax</span></span><br><span class="line">		<span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;搬运收入</span></span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="built_in">bx</span>	<span class="comment">;每项数据占用4字节</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="number">84</span>	<span class="comment">;(ds*16+54h) 是该类数据的起始基址</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">di</span>,<span class="number">5</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">ax</span>,[<span class="built_in">bx</span>]</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">dx</span>,[<span class="built_in">bx</span>+<span class="number">2</span>]</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>],<span class="built_in">ax</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>+<span class="number">2</span>],<span class="built_in">dx</span></span><br><span class="line">		<span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;搬运雇员数</span></span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line">                    <span class="comment">;每项数据占用2字节</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="number">168</span>  <span class="comment">;(ds*16+A8h) 是该类数据的起始基址</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">di</span>,<span class="number">5</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">cx</span>,[<span class="built_in">bx</span>]</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>],<span class="built_in">cx</span></span><br><span class="line">		<span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;计算人均收入并存储在指定位置</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">di</span>,<span class="number">3</span></span><br><span class="line">		<span class="keyword">div</span> <span class="built_in">cx</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>],<span class="built_in">ax</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;计算步长</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">di</span>,<span class="number">3</span></span><br><span class="line">		<span class="keyword">add</span> <span class="built_in">bx</span>,<span class="number">2</span>	<span class="comment">;详见本题开头的说明</span></span><br><span class="line">		<span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line">		<span class="keyword">loop</span> s</span><br><span class="line"></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">4c00h</span></span><br><span class="line">	<span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>运行结果如下</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/posts/masm-wangshuang-exercise/实验7.png">
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">实验7运行结果</div>
</center>
<p>反思总结：<br>
相较于参考资料答案中给出的代码，我的代码用了更少的寄存器（没有用bp和si寄存器）并且通过展平减少了一重循环，更好的利用了设置的栈，此外，在地址的计算上更依赖于数数上的技巧使得代码不是很直观且容易出错。
如果充分利用bp和si寄存器，并且颠倒一下搬运数据的顺序代码可以更简洁，不过懒得搞了，大概是这么个意思。</p>
<h2 id="ch9"><a class="markdownIt-Anchor" href="#ch9"></a> CH9</h2>
<h3 id="检测点91"><a class="markdownIt-Anchor" href="#检测点91"></a> 检测点9.1</h3>
<p>这里 <code>mov [bx+2],cs</code> 等效于 <code>add ax,1 mov [bx+2],ax</code> 这两条指令合并的效果，但是题目只给了一行，所以不能用后面的写法。主要是x86里各种指令的操作对象允许的不同，但这里是<code>mov</code> 的操作数是可以有段寄存器cs的</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line">	<span class="built_in">dd</span> <span class="number">12345678h</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span> </span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,data</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">bx</span>,<span class="number">0</span></span><br><span class="line">	<span class="keyword">mov</span> [<span class="built_in">bx</span>],<span class="built_in">bx</span></span><br><span class="line">	<span class="keyword">mov</span> [<span class="built_in">bx</span>+<span class="number">2</span>],<span class="built_in">cs</span></span><br><span class="line">	<span class="keyword">jmp</span> <span class="built_in">dword</span> <span class="built_in">ptr</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h3 id="实验8"><a class="markdownIt-Anchor" href="#实验8"></a> 实验8</h3>
<p>注：</p>
<ul>
<li><code>jmp short 标号</code> 占两个字节</li>
<li><code>nop</code> 指令占一个字节</li>
</ul>
<p>源程序中的代码<code>jmp short s1</code>具有迷惑性，不能被骗了。</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>,offset s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>,offset s2</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="built_in">cs</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cs</span>:[<span class="built_in">di</span>],<span class="built_in">ax</span></span><br></pre></td></tr></table></figure>
<p>这段代码的主要用处是将s2处的第一条指令搬到s处。要注意这个搬运是<strong>在程序运行时发生</strong>的，而程序运行<strong>前</strong>需要经过<strong>编译</strong>、连接，所以搬运的不是原始代码中的指令<code>jmp short s1</code>，而是编译后的结果<code>EBF6</code>。</p>
<p><code>EB</code>对应<code>jmp</code>指令，<code>F6</code>即为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">-10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">0</span></span></span></span>，所以标号s处的指令为<code>EBF6</code>，考虑到 <code>位移=标号处的地址-jmp指令后的第一个字节的地址</code>，所以标号s处的 <code>EBF6</code> 执行完后 <code>IP=0000</code>，恰好指向开头的 <code>mov ax,4c00h</code>。</p>
<p>所以程序可以正常结束。</p>
<h3 id="实验9"><a class="markdownIt-Anchor" href="#实验9"></a> 实验9</h3>
<p>行列数的可能不是很正中，意思意思得了，这是白底蓝字闪烁的版本，别的同理。不用全屏也能看到闪烁。</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ds</span>:data</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span> </span><br><span class="line">	<span class="built_in">db</span> <span class="string">&#x27;welcome to masm!&#x27;</span>	<span class="comment">;共16个字节（包括空格，空格也是字符！）</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span>	<span class="comment">;搞个栈暂存数据，后面要腾挪寄存器</span></span><br><span class="line">	<span class="built_in">dw</span> <span class="number">8</span> dup(<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">start:</span> </span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,data</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ds</span>,<span class="built_in">ax</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">si</span>,<span class="number">0</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">0b800h</span>	<span class="comment">;页首，立即数开头若是字母需补0</span></span><br><span class="line">	<span class="keyword">add</span> <span class="built_in">ax</span>,<span class="number">0078h</span>	<span class="comment">;计算行偏移加在段地址上，加在段地址上的偏移需除以16！</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">es</span>,<span class="built_in">ax</span>		<span class="comment">;存放最终段地址</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">di</span>,<span class="number">64</span>		<span class="comment">;计算列偏移作为偏移地址</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="number">16</span>	<span class="comment">;以下循环 将要输出的内容从data段搬运到显示缓冲区，并调整颜色</span></span><br><span class="line"><span class="symbol">	s:</span></span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">cx</span>	<span class="comment">;暂存cx，因为后面还要用到cx寄存器进行跳转</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;搬运内容</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="built_in">ds</span>:[<span class="built_in">si</span>]</span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>],<span class="built_in">ax</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">;调整属性</span></span><br><span class="line">		<span class="keyword">push</span> <span class="built_in">di</span></span><br><span class="line">		<span class="keyword">and</span> <span class="built_in">di</span>,<span class="number">0001h</span></span><br><span class="line">		<span class="keyword">mov</span> <span class="built_in">cx</span>,<span class="built_in">di</span></span><br><span class="line">		<span class="keyword">pop</span> <span class="built_in">di</span></span><br><span class="line">		<span class="keyword">jcxz</span> s1	<span class="comment">;index为偶数的存字符ascii码，跳转后对该index的下一个index操作该码的属性</span></span><br><span class="line"><span class="symbol">	s2:</span>			<span class="comment">;跳转后返回的地址	</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">;处理步长</span></span><br><span class="line">	<span class="keyword">inc</span> <span class="built_in">di</span>		<span class="comment">;目标数据偏移地址+1，属性占用的字节在操作属性时加过了</span></span><br><span class="line">	<span class="keyword">inc</span> <span class="built_in">si</span>		<span class="comment">;源数据偏移+1</span></span><br><span class="line">	<span class="keyword">pop</span> <span class="built_in">cx</span>		<span class="comment">;还原循环变量</span></span><br><span class="line">	<span class="keyword">loop</span> s		<span class="comment">;对下一个源数据操作</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">;操作完成，程序返回</span></span><br><span class="line">	<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">4c00h</span></span><br><span class="line">	<span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">	</span><br><span class="line"><span class="symbol">	s1:</span> </span><br><span class="line">		<span class="comment">;操作属性</span></span><br><span class="line">		<span class="keyword">inc</span> <span class="built_in">di</span></span><br><span class="line">			<span class="keyword">mov</span> <span class="built_in">ax</span>,<span class="number">00f1h</span>	<span class="comment">;立即数开头若是字母需补0</span></span><br><span class="line">			<span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>],<span class="built_in">ax</span></span><br><span class="line">		<span class="keyword">jmp</span> s2</span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>自己玩儿</category>
      </categories>
      <tags>
        <tag>assembly</tag>
        <tag>DOS</tag>
      </tags>
  </entry>
</search>
